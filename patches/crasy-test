Bottom: 3e9bc7394f0335f315dac9558535d270709c8982
Top:    9e889300260b0e5215d25cbf54153e1033ececca
Author: Peter Clifton <pcjc2@cam.ac.uk>
Date:   2011-04-27 21:52:09 +0100

Crasy test


---

diff --git a/src/draw.c b/src/draw.c
index b6555a2..8b717cc 100644
--- a/src/draw.c
+++ b/src/draw.c
@@ -158,10 +158,12 @@ via_callback (const BoxType * b, void *cl)
 }
 
 static int
-pad_callback (const BoxType * b, void *cl)
+pad_inlayer_callback (const BoxType * b, void *cl)
 {
   PadTypePtr pad = (PadTypePtr) b;
-  int *side = cl;
+  LayerType *layer = cl;
+  int solder_group = GetLayerGroupNumberByNumber (solder_silk_layer);
+  int group = GetLayerGroupNumberByPointer (layer);
 
   if (ON_SIDE (pad, *side))
     {
@@ -582,7 +584,6 @@ pin_mask_callback (const BoxType * b, void *cl)
 static int
 via_mask_callback (const BoxType * b, void *cl)
 {
-  dapi->draw_via_mask ((PinType *) b, NULL, NULL);
   return 1;
 }
 
diff --git a/src/draw_funcs.c b/src/draw_funcs.c
index 679d973..bb3771c 100644
--- a/src/draw_funcs.c
+++ b/src/draw_funcs.c
@@ -185,6 +185,7 @@ draw_poly (PolygonType *polygon, const BoxType *drawn_area, void *userdata)
     }
 }
 
+<<<<<<< current
 static int
 line_callback (const BoxType * b, void *cl)
 {
@@ -398,7 +399,10 @@ struct draw_funcs d_f = {
   .draw_rat       = draw_rat,
   .draw_arc       = draw_arc,
   .draw_poly      = draw_poly,
+<<<<<<< current
   .draw_layer     = draw_layer,
+=======
+>>>>>>> patched
 };
 
 struct draw_funcs *dapi = &d_f;
diff --git a/src/draw_funcs.h b/src/draw_funcs.h
index 25c33a1..485915c 100644
--- a/src/draw_funcs.h
+++ b/src/draw_funcs.h
@@ -11,7 +11,10 @@ struct draw_funcs {
   void (*draw_rat)       (RatType *,     const BoxType *, void *);
   void (*draw_arc)       (ArcType *,     const BoxType *, void *);
   void (*draw_poly)      (PolygonType *, const BoxType *, void *);
+<<<<<<< current
   void (*draw_layer)     (LayerType *,   const BoxType *, void *);
+=======
+>>>>>>> patched
 };
 
 extern struct draw_funcs *dapi;
